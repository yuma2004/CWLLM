# 運用ガイチE
## 目皁E本ドキュメントE、リポジトリ構造・命名規則・運用手頁EEスクリプトの入出力をまとめる、E
## 構造
### リポジトリ
- backend/: API・バッチE- frontend/: UI (React + TypeScript + Vite)
- infra/: Docker Compose・インフラ系スクリプト
- scripts/: 開発/運用補助スクリプト
- Docs/: 仕様E要件・AI刁E・運用ドキュメンチE
### Docs
- Docs/ChatWork_API仕槁Emd
- Docs/要件定義書.md

## 命名規則
- ドキュメンチE 冁EがEかる名前を付け、空白は使わなぁE英語名は `kebab-case`、E- スクリプト: 1スクリプト1用途。`kebab-case` で動詞から始める、E- 配置: 運用系は `infra/scripts/`、E発補助は `scripts/`、E- 出力ファイル: 既定E命名Eタイムスタンプ付き (`backup_YYYYMMDD_HHmmss.dump`, `CWLLMv_ai_review_YYYYMMDD_HHmmss.zip`)、E
## 運用手頁E### ローカル起勁E1. Docker Compose で DB を起動、E2. backend/frontend を開発モードで起動、E
推奨コマンチE
```bash
npm run dev
```

### DB バックアチEE/リストア
- Backup:
```powershell
pwsh infra/scripts/backup.ps1 -DatabaseUrl $env:DATABASE_URL -OutputPath backup.dump
```
- Restore:
```powershell
pwsh infra/scripts/restore.ps1 -DatabaseUrl $env:DATABASE_URL -BackupPath backup.dump
```

### AI レビュー用 ZIP
```powershell
pwsh scripts/create-ai-review-zip.ps1 -OutputPath C:\path\to\review.zip
```

## スクリプト入出劁E### infra/scripts/backup.ps1
- 入劁E
  - `-DatabaseUrl` (未持E時は `DATABASE_URL` を使用)
  - `-OutputPath` (未持E時は `backup_YYYYMMDD_HHmmss.dump`)
- 出劁E
  - `pg_dump` 形式E `.dump` ファイル
  - 終亁EードE `pg_dump` に準拠

### infra/scripts/restore.ps1
- 入劁E
  - `-DatabaseUrl` (未持E時は `DATABASE_URL`)
  - `-BackupPath` (忁EE
- 出劁E
  - `pg_restore` による復允E衁E  - 終亁EードE `pg_restore` に準拠

### scripts/create-ai-review-zip.ps1
- 入劁E
  - `-OutputPath` (未持E時は `CWLLMv_ai_review_YYYYMMDD_HHmmss.zip`)
  - `-ListOnly` (一覧のみ出力し、zip を生成しなぁE
- 出劁E
  - zip ファイルまたE対象ファイル一覧 (標準E劁E
  - `tar` コマンドが忁EE
### scripts/dev.mjs
- 入劁E
  - なぁE(冁Eで `docker compose -f infra/docker-compose.yml up -d` と `npm run dev` を実衁E
- 出劁E
  - backend/frontend のログを標準E力に出劁E  - ぁEれかが終亁Eた場合、両方を終亁E

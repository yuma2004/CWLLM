# 01 リポジトリ構成 / 環境構築（フロント・バック分離）

対象：スキャフォールド、ローカル実行、テスト基盤、DB起動まで。

---

## 採用スタック（現状）

- Frontend：React + TypeScript + Vite + Tailwind CSS
- Backend：Node.js + TypeScript + Fastify（Cookie + JWT）
- DB：PostgreSQL（Docker Compose）
- ORM：Prisma
- Test：Vitest（backend/frontend）

※別スタックに変更しても、以降の計画の「順序」と「要件の満たし方」は変わりません。

---

## 作成/変更する予定の主なファイル

- `frontend/`（UI）
- `backend/`（API + バッチ）
- `infra/`（`docker-compose.yml` 等）
- `Docs/`（設計・運用）

---

## TODO（AIが実装/検証/コミット。人間は初回セットアップと秘密情報のみ）

### AI作業

- [x] `frontend/` を作成（最小表示＋ルーティングの土台）
- [x] `backend/` を作成（`GET /healthz` などの疎通API）
- [x] `infra/docker-compose.yml` で PostgreSQL を起動できるようにする
- [x] `backend` からDB疎通できる設定（接続文字列・マイグレーション雛形）
- [x] `frontend`/`backend` に `test` / `lint` / `format` を用意
- [x] ルートREADME（起動手順だけでOK）と `.env.example` を用意

### AI検証（AIが実行）

- [x] `cd infra; docker compose up -d`（DBヘルスチェックがOK）
- [ ] `cd backend; npm ci; npm run prisma:generate; npm run migrate:dev`
- [x] `cd backend; npm run test; npm run lint; npm run build`
- [ ] `cd backend; npm run dev` を起動し、`GET http://localhost:3000/healthz` が200
- [x] `cd frontend; npm ci`
- [x] `cd frontend; npm run test; npm run lint; npm run build`
- [ ] `cd frontend; npm run dev` を起動し、トップページが取得できる（例：`curl http://localhost:5173`）
- [ ] `frontend`→`backend` の疎通（`/api/*` のプレフィックス整合が取れている）

### 実行ログ（参考：チェック済み行は変更しない）

- [x] `docker compose up -d` でDBが起動すること
- [x] `backend` を起動して `GET /healthz` が200になること
- [x] `frontend`/`backend` の `test` が通ること

### 人間作業（必須のみ）

- [ ] Docker Desktop等を起動し、`docker compose` が実行できる状態にする（初回のみ）

### Git（AI）

- [ ] `git init -b main`（未実施なら）
- [ ] `git add -A`
- [ ] `git commit -m "chore: scaffold frontend/backend"`
- [ ] `git remote add origin <YOUR_REPO_URL>`（※URLは人間が用意）
- [ ] `git push -u origin main`



---

# 要件定義書（ドラフト）

**案件名**：Chatwork連携 企業/案件/対応管理システム（仮）
**版**：v0.1（ドラフト）
**作成日**：2025-12-23
**作成者**：—

---

## 1. 背景・目的

### 1.1 背景

* 会社の成長に伴い、Chatwork（CW）上で関わる企業数が増加。
* ASPとして関係先が多岐にわたり、関係・案件・金額・担当者・対応履歴が **CW内の複数ルーム/複数担当に分散**。
* 現状、「どの企業が今どうなっているか」「誰が何を対応したか」「どの案件をどこに卸したか」が即座に追えず、属人化・取りこぼし・重複対応のリスクが高い。

### 1.2 目的

* CWのコミュニケーションを企業単位で統合し、**最新状況の可視化**と**対応の一元管理**を実現する。
* 企業・案件・卸（相互卸含む）・タスク・担当を紐づけて、「いつ・誰が・どの企業に・何を・いくらで・どう対応したか」を追跡可能にする。
* 将来的な組織拡大を見据え、引継ぎ容易性と運用の標準化を確立する。

### 1.3 成功指標（KPI例）

* 企業の最新状況把握に要する時間：平均 **◯分 → ◯秒**（目標値は後で確定）
* 対応漏れ（期限超過タスク、未返信放置など）の件数：月 **◯件 → ◯件**
* 案件卸の履歴追跡に要する時間：平均 **◯分 → ◯分**
* 属人問い合わせ（「これどうなってる？」の口頭/チャット確認）回数：週 **◯回 → ◯回**

---

## 2. 対象範囲（スコープ）

### 2.1 対象企業区分（マスタで管理）

* 広告主
* アフィリエイター／メディア法人
* 他社ASP（相互卸・案件の相互提供等）
* その他（代理店、制作、計測、ツールベンダ等）

### 2.2 対象業務

* CW上のコミュニケーションの吸い上げ・企業別統合
* 企業情報（企業像、担当者、関係性、メモ）の管理
* 案件情報の管理（最低限：案件名・金額/単価・条件・ステータス・関係企業）
* 卸（どの企業にどの案件を卸したか、条件、対応者、履歴）の管理
* タスク（担当者・期限・ステータス）管理

### 2.3 非対象（本ドラフト時点）

* 運用保守の要件（監視運用体制、SLA、障害一次対応フロー等）
* 会計・請求・支払の厳密な基幹連携（将来拡張としては検討可）
* 契約書の法務ワークフロー（将来拡張としては検討可）

---

## 3. 用語定義

* **CW**：Chatwork
* **企業**：取引・連携対象の法人/組織（広告主、メディア、ASP、その他）
* **案件**：広告主の施策/オファー/プログラム（ASP案件）
* **卸**：案件を他社ASPやメディア等へ提供する行為、およびその取引記録
* **対応履歴**：コミュニケーション、決定事項、依頼、確認、承認、実施記録
* **要約**：企業単位に統合されたCW内容から生成する状況サマリ（生成AI利用を前提）

---

## 4. To-Be（あるべき姿）概要

* 企業ごとに「**企業ページ**」が存在し、以下が1画面で分かる：

  * 直近の要約（最新状況・重要トピック・未解決点・次アクション）
  * CWの関連会話ログ（ルーム横断）
  * 紐づく案件、卸履歴（いつ/誰/条件/金額）
  * 担当者（自社/先方）とタスク（期限・状態）
* 案件を軸に「どの企業に卸したか」「条件は何か」「誰が窓口か」が追える。
* 対応者が変わっても、履歴と意思決定が残り、引継ぎが容易。

---

## 5. 利用者・権限（ロール）

### 5.1 想定ロール

* **管理者（Admin）**：マスタ設定、権限管理、連携設定、全データ閲覧
* **営業/アライアンス**：企業・案件・卸・タスク管理、要約閲覧、メモ追加
* **運用**：案件進行に関わるタスク更新、会話履歴参照、要約閲覧
* **閲覧のみ**：参照中心（経営/管理部門等）

### 5.2 権限制御の基本方針（要件）

* 企業・案件・卸・会話ログ・要約・タスクの閲覧/編集をロールで制御できること
* 「特定企業のみ閲覧可」等、部門/チーム単位のアクセス制御が可能であること（最低限：閲覧制限）

---

## 6. 機能要件

> 優先度定義
>
> * **Must**：最低限の必須要件（MVP）
> * **Should**：可能な限り実現したい
> * **Could**：将来拡張/余力があれば

---

### 6.1 CW（Chatwork）連携／データ取り込み

**目的**：CW内の情報を吸い上げ、企業単位に再編・検索・要約可能にする。

* **FR-CW-01（Must）**：CWからメッセージ（本文、投稿者、日時、ルーム情報）を取得し、システムに保存できること
* **FR-CW-02（Must）**：メッセージを「企業」に紐づけられること（手動紐づけを含む）
* **FR-CW-03（Must）**：1企業に対し複数ルーム（複数CW会話）を紐づけられること
* **FR-CW-04（Should）**：添付ファイルのメタ情報（ファイル名、投稿者、日時、リンク等）を取得し、企業/案件に紐づけできること
* **FR-CW-05（Should）**：取り込み対象ルームの追加/除外を設定できること
* **FR-CW-06（Should）**：取り込み失敗・権限不足等のエラーを管理者が検知できること（エラーログ/通知）
* **FR-CW-07（Could）**：既存メッセージの編集・削除などのイベントを反映できること（追随要否は要検討）

---

### 6.2 企業マスタ（企業情報の把握）

* **FR-CMP-01（Must）**：企業を登録・編集・検索できること
* **FR-CMP-02（Must）**：企業区分（広告主/メディア/他社ASP/その他）を保持できること
* **FR-CMP-03（Must）**：企業にタグ（例：優先度高、要注意、VIP、休眠等）を付与できること
* **FR-CMP-04（Should）**：企業プロフィール（事業内容、商流、得意領域、審査メモ、NG事項等）を自由記述で管理できること
* **FR-CMP-05（Should）**：企業ごとにステータス（例：商談中/稼働中/停止/休眠）を管理できること
* **FR-CMP-06（Could）**：与信・コンプラ観点のチェック項目（反社/広告表現/計測要件等）を管理できること

---

### 6.3 企業別AI要約（最新状況の把握）

**目的**：「直近状況が3分で分かる」状態を企業単位で実現する。

* **FR-AI-01（Must）**：企業単位で、指定期間（例：直近7日/30日）のCW内容を要約できること
* **FR-AI-02（Must）**：要約に以下を含められること

  * 重要トピック（決定事項・依頼事項・リスク）
  * 未解決点（保留/確認待ち/返信待ち）
  * 次アクション（誰が/何を/いつまでに）
* **FR-AI-03（Must）**：要約結果の履歴（生成日時、対象期間、生成者/自動生成の区別）を保存できること
* **FR-AI-04（Should）**：要約から「タスク候補」を抽出し、ワンクリックでタスク化できること
* **FR-AI-05（Should）**：要約の根拠となる会話（該当メッセージ）へ遷移できること（“引用元”の追跡）
* **FR-AI-06（Could）**：企業の温度感/緊急度を推定してアラートできること（例：返信滞留、炎上兆候、条件未合意）

※生成AIの精度は運用上の重要要素のため、要件として「**人が最終確認できる導線**」を前提にします（自動要約＝自動確定ではない）。

---

### 6.4 コミュニケーションタイムライン／検索

* **FR-COM-01（Must）**：企業ページで、紐づくCWメッセージを時系列に閲覧できること
* **FR-COM-02（Must）**：全文検索（企業横断/企業内）できること
* **FR-COM-03（Should）**：メッセージにラベル付け（例：金額合意、条件変更、クレーム、計測、請求）できること
* **FR-COM-04（Could）**：重要メッセージのピン留め、要点メモの追記ができること

---

### 6.5 案件マスタ（案件の把握）

* **FR-PRJ-01（Must）**：案件を登録・編集・検索できること
* **FR-PRJ-02（Must）**：案件に広告主企業を紐づけできること
* **FR-PRJ-03（Must）**：案件の主要項目を保持できること（例：案件名、報酬条件/単価、成果条件、期間、ステータス、担当者）
* **FR-PRJ-04（Should）**：案件関連の資料/添付/リンクを紐づけできること
* **FR-PRJ-05（Could）**：改定履歴（単価変更、条件変更）のバージョン管理ができること

---

### 6.6 卸管理（どの企業にどの案件を卸したか）

* **FR-WS-01（Must）**：卸レコードを作成できること（案件 × 卸先企業 × 条件の組）
* **FR-WS-02（Must）**：卸レコードに以下を保持できること

  * 卸先企業（メディア法人/他社ASP等）
  * 卸条件（単価、マージン、特記事項）
  * 担当者（自社）
  * 実施ステータス（提案中/合意/稼働/停止など）
  * 実施日/合意日
* **FR-WS-03（Must）**：案件から「卸先一覧」、企業から「受けた卸一覧」を参照できること
* **FR-WS-04（Should）**：卸レコードに関連会話（CWログ）を紐づけできること
* **FR-WS-05（Could）**：卸条件の差分検知（同案件の卸先別条件比較）ができること

---

### 6.7 担当者管理（企業ごとの担当者）

* **FR-CTC-01（Must）**：企業ごとに先方担当者を登録できること（氏名、役職、連絡先、メモ）
* **FR-CTC-02（Must）**：自社担当者（オーナー）を企業/案件/卸に紐づけできること
* **FR-CTC-03（Should）**：担当変更の履歴を残せること
* **FR-CTC-04（Could）**：キーパーソン、経理窓口、技術窓口などの役割を設定できること

---

### 6.8 タスク管理（企業別・案件別）

* **FR-TSK-01（Must）**：企業/案件/卸に紐づくタスクを作成できること
* **FR-TSK-02（Must）**：タスクに担当者・期限・優先度・ステータス（未着手/進行中/完了/保留）を設定できること
* **FR-TSK-03（Must）**：マイタスク一覧（自分が担当のタスク）を確認できること
* **FR-TSK-04（Should）**：期限超過・期限接近を通知できること
* **FR-TSK-05（Could）**：タスクテンプレート（例：案件開始時チェックリスト）を使えること

---

### 6.9 ダッシュボード／可視化

* **FR-DSH-01（Should）**：企業の「最新要約」「未完了タスク」「要注意フラグ」を一覧表示できること
* **FR-DSH-02（Should）**：案件別に「卸先数」「稼働状況」を俯瞰できること
* **FR-DSH-03（Could）**：対応滞留（一定期間返信なし等）を検知して一覧化できること

---

### 6.10 監査・履歴（誰が何をしたか）

* **FR-AUD-01（Must）**：企業/案件/卸/タスクの変更履歴（変更者・日時・変更内容）を保持できること
* **FR-AUD-02（Should）**：重要操作（削除、権限変更、連携設定変更）の監査ログを保持できること

---

### 6.11 インポート／エクスポート

* **FR-IO-01（Should）**：企業/案件/卸/タスクをCSV等でエクスポートできること
* **FR-IO-02（Could）**：既存のスプレッドシート管理情報をインポートできること

---

## 7. 画面要件（画面一覧）

* **SCR-01：ダッシュボード**

  * 直近更新企業、要注意企業、期限タスク、最近の要約生成状況
* **SCR-02：企業一覧**

  * フィルタ（区分/タグ/ステータス/担当者）
* **SCR-03：企業詳細（企業ページ）**

  * 企業プロフィール、直近要約、タイムライン（CWログ）、担当者、タスク、紐づく案件/卸
* **SCR-04：案件一覧／案件詳細**

  * 案件情報、広告主、関連資料、卸一覧、関連タスク
* **SCR-05：卸一覧／卸詳細**

  * 卸条件、ステータス、対応履歴（紐づく会話/メモ）、担当者、タスク
* **SCR-06：タスク管理**

  * マイタスク、企業別/案件別タスク
* **SCR-07：設定（管理者）**

  * タグ/ステータス/区分、権限、取り込み対象、要約設定（対象期間など）

---

## 8. データ要件（主要データモデル）

### 8.1 主要エンティティ

* **Company（企業）**

  * company_id, 名称, 区分, ステータス, タグ, プロフィール, オーナー（自社担当）等
* **Contact（担当者）**

  * contact_id, company_id, 氏名, 役割, 連絡先, メモ 等
* **Project（案件）**

  * project_id, 広告主company_id, 案件名, 条件/単価, 期間, ステータス, 担当者 等
* **Wholesale（卸）**

  * wholesale_id, project_id, 卸先company_id, 条件/単価/マージン, ステータス, 合意日, 担当者 等
* **Message（CWメッセージ）**

  * message_id, room_id, sender, datetime, body, company_id（紐づけ）, project_id（任意）, wholesale_id（任意）等
* **Summary（要約）**

  * summary_id, company_id, 対象期間, 本文, 生成日時, 生成種別（自動/手動）, 根拠リンク 等
* **Task（タスク）**

  * task_id, 対象（company/project/wholesale）, 担当者, 期限, ステータス, 詳細 等
* **AuditLog（変更履歴）**

  * 対象種別, 対象ID, 変更者, 日時, 変更差分 等

### 8.2 データ品質・整合性要件

* 企業名の重複登録を抑制（重複検知・統合はShould〜Could）
* 卸は必ず案件に紐づく（案件なし卸レコードは禁止、または例外ルールを定義）
* 重要な金額/条件項目は「自由記述だけ」に偏らない（最低限：数値フィールドを用意）

---

## 9. 外部インターフェース要件

* **IF-01（Must）**：Chatworkからデータ取得（メッセージ・ルーム情報等）
* **IF-02（Could）**：将来的にSlack/メール/Google Drive等の連携を拡張できる設計余地（現時点では要件として“拡張可能性”のみ）

---

## 10. 非機能要件

### 10.1 セキュリティ

* **NFR-SEC-01（Must）**：認証（ログイン）を必須とする
* **NFR-SEC-02（Must）**：ロールに基づくアクセス制御
* **NFR-SEC-03（Should）**：アクセスログ（誰がいつ何を見た/変更した）の保持
* **NFR-SEC-04（Should）**：要約生成対象から機微情報を除外/マスキングできる余地（運用ルールでも可）

### 10.2 性能・可用性

* **NFR-PERF-01（Should）**：企業ページ表示が実用的な速度であること（例：3秒以内等、目標値は後で確定）
* **NFR-AVAIL-01（Should）**：業務時間帯の利用に耐える可用性（目標は後で確定）

### 10.3 監査性・保全性

* **NFR-AUD-01（Must）**：変更履歴が追えること
* **NFR-DATA-01（Should）**：データバックアップ/復旧を可能にする（運用手順は本スコープ外だが、機能要件として必要）

### 10.4 使いやすさ

* **NFR-UX-01（Must）**：企業→要約→根拠会話→タスク化、の導線が短いこと
* **NFR-UX-02（Should）**：検索とフィルタで必要情報に最短で到達できること

---

## 11. 受入基準（例）

* 企業AのCWルームを紐づけると、企業Aページで該当メッセージが時系列表示され、検索可能である
* 企業Aの直近7日要約を生成すると、重要事項/未解決/次アクションが出力され、要約履歴に残る
* 案件Xを登録し、企業Bへ卸レコードを作成すると、案件X詳細に卸先として企業Bが表示され、企業B詳細に受け卸として案件Xが表示される
* タスクを作成し担当者を割り当てると、担当者のマイタスクに表示され、期限/ステータス更新が反映される
* 企業プロフィール/案件条件/卸条件の更新履歴が確認できる

---

## 12. 追加アイディア（実現可能性が高い拡張候補）

※「要件」として入れるかは優先度次第ですが、混乱解消に効くものを列挙します。

1. **構造化抽出（Should）**

   * CW文面から「案件名/金額/条件/期日/担当/合意事項」を抽出して、案件・卸・タスクに候補反映
2. **対応滞留アラート（Should）**

   * “先方からの質問があるのに未返信”“合意待ちが長い” を検知してアラート
3. **企業リスク・注意フラグ（Could）**

   * 過去トラブル、支払遅延、条件変更頻発、表現NGなどをタグ＋履歴で見える化
4. **意思決定ログ（Could）**

   * 「誰が/いつ/何を承認したか」を案件・卸に紐づけて残す（監査性が上がる）
5. **社内引継ぎテンプレ（Could）**

   * 企業ページから“引継ぎ用サマリ”をワンクリック生成（要約＋主要履歴＋関係者＋進行中タスク）

---

## 13. 要検討事項（未確定点として明示）

ここは“質問”ではなく、要件定義として「決める必要がある論点」を列挙します（後で確定すればOKです）。

* **企業とCWルームの紐づけルール**：

  * ルーム=1企業で運用できているか／1ルームに複数企業が混在するケースがあるか
  * →ない
* **案件・卸の最小管理粒度**：

  * 「案件名＋単価＋期間」程度で足りるか／承認フローや計測条件まで必要か
  * →必要
---

# 最低限のMVP定義（本要件からの抽出）

ユーザー要望に忠実に「最低限」を言語化すると、MVPは以下になります。

* CW取り込み（企業に紐づく）
* 企業マスタ（区分・プロフィール・タグ）
* 企業別AI要約（直近状況、未解決、次アクション）
* 企業別タスク管理（担当・期限・状態）
* （できれば）案件マスタ＋卸管理（案件×卸先×条件×担当×履歴）

---



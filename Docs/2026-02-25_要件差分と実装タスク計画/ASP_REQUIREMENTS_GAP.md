# ASP業務管理アプリ 要件差分レポート

作成日: 2026-02-25  
対象: 現行アプリ（CWLLMv）

## 1. このドキュメントの目的

再定義された要件と現状実装を照合し、どこが一致し、どこが不足しているかを明確化する。

## 2. 判定ルール

- `○`: 要件をほぼ満たしている
- `△`: 一部満たしているが、業務要件としては不足が残る
- `×`: 未実装、または要件の中核を満たしていない
- `対象外`: 今回の要件調整で実装対象から外したもの

## 3. 用語の対応関係（現状実装との読み替え）

- 取引先（Partner） ≒ 企業（Company）
- プログラム（Program） ≒ 案件（Project）
- ディール（Deal） ≒ 卸（Wholesale）

補足: 現状は「卸」が存在するため近い概念はあるが、ASP業務で必要な「ディール中心設計」には未到達。

## 4. 全体サマリ

- 一致度の目安: **約4割**
- 主な不足: **ディール中核機能（交渉履歴、ステータス遷移、案件横断管理）**
- 結論: 現状は「企業・案件・チャット履歴管理アプリ」であり、要件が求める「ASPディール運用アプリ」には追加実装が必要

## 5. チェックリスト照合（要件 6章）

| チェック項目 | 判定 | 現状 | ギャップ |
| --- | --- | --- | --- |
| 「ディール」という管理単位が存在するか | △ | `Wholesale` で近い概念はある | 業務上のディール定義（打診〜掲載までの運用軸）として不十分 |
| 同じプログラムでパートナーごとに異なる単価管理 | ○ | `projectId + companyId` 単位で `unitPrice` を保持可能 | 基本要件は満たす |
| 単価交渉の履歴を記録できるか | × | 現在単価は最新値のみ | 変遷（提示→逆提案→合意）が残らない |
| ディールのステータス遷移が定義されているか | △ | `active/paused/closed` はある | 要件の業務遷移（打診前/打診中/交渉中/合意/掲載準備中/掲載中/停止・終了）に未対応 |
| Chatworkやり取りを構造化して案件紐付け可能か | △ | メッセージ保存・ラベル付け・企業紐付けは可能 | Noteエンティティ不在、Deal/Program/Partnerへの運用しやすい紐付け導線が不足 |
| タスクが案件（Deal/Program）に紐付くか | ○ | `targetType` で `project/wholesale/general/company` に紐付け可 | 基本は満たす |
| 取引先の横串検索ができるか | △ | 全文検索や一覧はある | 「メディアBの全ディール」など役割軸・条件軸の検索が弱い |
| 誰が何を更新したかのログがあるか | 対象外 | ログ永続化は今回の要件調整で対象外 | 現フェーズでは実装しない |
| ダッシュボードで「今やるべきこと」が一目で分かるか | △ | 期限ベースのタスク集約はある | 返答待ち超過、ディール優先度、チーム活動フィードが不足 |

## 6. 機能要件別の差分

| 機能要件 | 判定 | コメント |
| --- | --- | --- |
| 3.1 ダッシュボード | △ | タスク表示はあるが、ディール中心の優先度表示が不足 |
| 3.2 プログラム管理 | △ | 案件管理はあるが、成果地点・承認条件・LP規約添付など不足 |
| 3.3 ディール管理（中核） | × | 交渉履歴、業務ステータス遷移、カンバン運用、高度フィルタが不足 |
| 3.4 取引先管理 | △ | 企業情報と担当者はあるが、複数役割（広告主/メディア/ASP）管理が不足 |
| 3.5 タスク管理 | △ | CRUDはあるが、ディール状態連動の自動生成ルールが不足 |
| 3.6 やり取りメモ | × | 専用 Note がなく、メッセージを業務メモとして運用しづらい |
| 3.7 通知アラート | × | タスク期限・返答待ちアラートの業務通知が未実装 |

## 7. 非機能要件の差分

| 非機能要件 | 判定 | コメント |
| --- | --- | --- |
| 主要画面1秒以内 | △ | 明示的な性能目標と計測運用が未整備 |
| 同時利用 数人〜10人 | △ | 想定規模での検証記録が不足 |
| 数千ディール/年 | △ | 将来想定を満たす索引・検証は未確認 |
| 認証（メール+PW or OAuth） | △ | メール+PWはあり、OAuthは未実装 |
| 権限（現状の admin/employee 運用） | ○ | 現状の admin/employee 区分で運用可能 |
| 日次バックアップ | △ | スクリプトはあるが日次の自動運用前提が未定義 |
| モバイル対応（最低限閲覧） | △ | レスポンシブUIはあるが要件基準での検証が未整理 |

## 8. 優先度付きギャップ一覧

### P0（最優先）

- Deal中核の再設計（ステータス遷移、交渉履歴、担当・条件管理）
- Note機能（Chatwork要約の構造化、Deal/Program/Partnerへの紐付け）
- ダッシュボード再設計（対応要否の即時可視化）

### P1（次点）

- 取引先ロール複数管理（広告主/メディア/ASP/その他）
- タスク自動生成（打診フォロー、合意後チェックリスト）
- 返答待ち・期限アラート通知

### P2（改善）

- OAuth追加
- 性能SLO・計測整備
- 日次バックアップ運用の明文化と監視

## 9. まとめ

現状には再利用可能な土台（企業/案件/卸、タスク、Chatwork取り込み）がある。  
一方で、要件の本質である「ディール運用の可視化と再現性」を支える機能が不足している。  
次工程では、まず `Deal + 交渉履歴 + Note + ダッシュボード` を中核として段階実装するのが最短。

# 00 進め方（AIコーディング前提 / TDD / Git運用）

このプロジェクトは「AIが実装→AIが自動検証→AIがpush→（必要な時だけ）人間が確認→AIが修正」を高速ループする前提で、**AIではできないこと（秘密情報投入/最終受入）だけ人間タスク**として残します。

---

## 1. 進行ループ（基本形）

1. AI：テストを先に追加（失敗する状態）
2. AI：最小実装でテストを通す
3. AI：自動検証（lint/test/build/migrate/smoke）を実行し、落ちたら修正
4. AI：リファクタ（重複削除/命名/境界整理）
5. AI：コミットして `git push`（CIがあればCIも合格させる）
6. 人間（必須のみ）：秘密情報の投入/外部連携の実動確認/受入判断
7. AI：フィードバックを元に修正

---

## 2. テスト戦略（TDDの粒度）

優先順位（速い/壊れやすい順）：
- **ユニットテスト**：ドメイン/サービス（例：取り込みの差分計算、権限判定、要約対象選定）
- **APIテスト（統合）**：HTTP経由で主要エンドポイントを検証（RBAC含む）
- **UIテスト（コンポーネント）**：入力/表示/バリデーション
- **E2E（任意）**：主要導線のみ（企業→タイムライン→要約→タスク化）

「Must」を満たす範囲は、まずユニット＋APIテストを厚くします（UIはスモーク＋重要導線）。

---

## 3. 人間のチェックポイント（最小）

AIがローカルで自動検証（テスト/リント/ビルド/疎通）と `git push` まで行います。人間が必ずやるのは次だけです。

- 初回：Gitのremote URLを用意し、AIがpushできる認証状態にする（HTTPS/PATやSSH鍵など）
- 外部連携：Chatwork APIトークン、LLM APIキー等の投入（`.env`/Secret Manager）
- 受入：要約の品質、運用ルール等の「仕様判断に依存」する最終確認（必要な時だけ）

---

## 4. Git運用（pushをタスクに含める）

### 初回（まだGitでない場合 / AIが実行）

- `git init -b main`
- `.gitignore` 追加（Node/React/環境変数/ログ）
- `git add -A`
- `git commit -m "chore: initial project skeleton"`
- `git remote add origin <YOUR_REPO_URL>`（※URLは人間が用意）
- `git push -u origin main`

### 以降（マイルストーンごと）

- `git add -A`
- `git commit -m "feat: <milestone>"`
- `git push`

（任意）PR運用にするなら：`feature/<milestone>` ブランチ→PR→main マージ。

補足（PowerShell）：
- `&&` は使えないので、コマンド連結は `;` か改行で実行する

---

## 5. 仕様変更の扱い（AIの速度を落とさないために）

- 要件の未確定点（例：OAuthにするか、案件の粒度）は「決めるまで動く暫定」→後で差し替え
- DBは **後方互換のマイグレーション**前提（renameより追加→移行→削除）
- “Should/Could” はMVP後にチケット化して分離（今の実装に無理にねじ込まない）
